(this["webpackJsonpshopping-cart"]=this["webpackJsonpshopping-cart"]||[]).push([[0],{35:function(e,t,c){},36:function(e,t,c){},38:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),s=c(14),i=c.n(s),a=(c(35),c(36),{headerTitle:"Shopping Cart",footerTitle:"\xa9 Copywrite Mohamed Atef 2022",cartHeader:"Number of cart items:",cartTitle:"Title:",cartQty:"Quantity:",cartPrice:"Price:",removeBtn:"Remove",selectProducts:"select products",total:"Total:",checkout:"Checkout",name:"Name",email:"Email"}),o=c(0);var l=function(){return Object(o.jsx)("footer",{children:a.footerTitle})};c(38);var d=function(){return Object(o.jsx)("header",{children:a.headerTitle})},j=c(9),u=c(13),b=c(3),O="FETCH_PRODUCTS",h="FILTER_SIZE",f="FILTER_SORT",m="ADD_CART",p="REMOVE_CART",x="CLEAR_CART",v="CREATE_ORDER",g="CLEAR_ORDER",y="FETCH_ORDERS",C=Object(u.b)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{products:t.data,filterProducts:t.data};case h:return Object(b.a)(Object(b.a)({},e),{},{size:t.data.size,filterProducts:t.data.products});case f:return Object(b.a)(Object(b.a)({},e),{},{sort:t.data.sort,filterProducts:t.data.products});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:JSON.parse(localStorage.getItem("cartItems"))||[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:case p:return{cartItems:t.data.cartItems};case x:return Object(b.a)(Object(b.a)({},e),{},{products:[]});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(b.a)(Object(b.a)({},e),{},{orders:t.data.orders});case v:return{order:t.data.order};case g:return{order:!1};default:return e}}}),N=c(30),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,I=Object(u.d)(C,{},_(Object(u.a)(N.a))),S=c(16);c(42);var T=function(){return Object(o.jsx)("div",{className:"nav",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)(S.b,{to:"/",children:"Home"})}),Object(o.jsx)("li",{children:Object(o.jsx)(S.b,{to:"/orders",children:"Orders"})})]})})},E=c(2),P=c(17),R=c(7),w=(c(43),c(22)),F=c.n(w),k=c(11),z=c(18),q=c.n(z);var A=function(e){var t=e.order,c=e.closeModal,r=e.cartItems;return Object(o.jsx)(o.Fragment,{children:t&&Object(o.jsx)(q.a,{isOpen:!!t,onRequestClose:c,children:Object(o.jsxs)("div",{className:"order-info",children:[Object(o.jsx)("span",{className:"close-icon",onClick:c,children:"\xd7"}),Object(o.jsx)("p",{className:"alert-success",children:" order done success "}),Object(o.jsxs)("table",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Name:"}),Object(o.jsx)("td",{children:t.name})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Email:"}),Object(o.jsx)("td",{children:t.email})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Total:"}),Object(o.jsx)("td",{children:r.reduce((function(e,t){return e+t.price}),0)})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Selected Items:"}),Object(o.jsx)("td",{children:r.map((function(e){return Object(o.jsxs)("div",{className:"cart-data",children:[Object(o.jsxs)("p",{children:["Number of this products: ",e.qty]}),Object(o.jsxs)("p",{children:["Title of products: ",e.title]})]})}))})]})]})]})})})};c(56);function D(e){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{children:[" ",e.label," "]}),Object(o.jsx)("input",{type:e.type,required:!0,name:e.name,onChange:e.onChange})]})}var L=c(23),B=c.n(L);var M=function(e){return Object(o.jsx)(o.Fragment,{children:e.showForm&&Object(o.jsxs)("div",{className:"checkout-form",children:[Object(o.jsx)("span",{className:"close-icon",onClick:function(){return e.setShowForm(!1)},children:"\xd7"}),Object(o.jsx)(B.a,{left:!0,children:Object(o.jsxs)("form",{onSubmit:e.submitOrder,children:[Object(o.jsx)(D,{label:a.name,type:"text",name:"name",onChange:e.handleChange}),Object(o.jsx)(D,{label:a.email,type:"email",onChange:e.handleChange,name:"email"}),Object(o.jsx)("div",{children:Object(o.jsxs)("button",{type:"submit",children:[" ",a.checkout," "]})})]})})]})})};var H=Object(j.b)((function(e){return{order:e.order.order,cartItems:e.cart.cartItems}}),{removeCart:function(e){return function(t,c){var r=c().cart.cartItems,n=Object(k.a)(r).filter((function(t){return t._id!==e._id}));t({type:p,data:{cartItems:n}}),localStorage.setItem("cartItems",JSON.stringify(n))}},createOrder:function(e){return function(t){fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return t({type:v,data:{order:e}})})),localStorage.clear("cartItems"),t({type:x})}},clearOrder:function(){return function(e){e({type:g})}}})((function(e){var t=Object(r.useState)(!1),c=Object(R.a)(t,2),n=c[0],s=c[1],i=Object(r.useState)(""),l=Object(R.a)(i,2),d=l[0],j=l[1];return Object(o.jsxs)("div",{className:"cart-wrapper",children:[Object(o.jsx)("div",{className:"cart-title",children:0===e.cartItems.length?"Cart Empty":Object(o.jsxs)("p",{children:[a.cartHeader," ",e.cartItems.length]})}),Object(o.jsx)(A,{cartItems:e.cartItems,order:e.order,closeModal:function(){e.clearOrder(),s(!1)}}),Object(o.jsx)(F.a,{bottom:!0,cascade:!0,children:Object(o.jsx)("div",{className:"cart-items",children:e.cartItems.map((function(t){return Object(o.jsxs)("div",{className:"cart-item",children:[Object(o.jsx)("img",{src:t.imageUrl,alt:""}),Object(o.jsxs)("div",{className:"cart-info",children:[Object(o.jsxs)("div",{children:[Object(o.jsxs)("p",{children:[a.cartTitle," ",t.title]}),Object(o.jsxs)("p",{children:[a.cartQty," ",t.qty]}),Object(o.jsxs)("p",{children:[a.cartPrice," $",t.price*t.qty]})]}),Object(o.jsx)("button",{onClick:function(){return e.removeCart(t)},children:a.removeBtn})]})]},t.id)}))})}),0!==e.cartItems.length&&Object(o.jsxs)("div",{className:"cart-footer",children:[Object(o.jsxs)("div",{className:"total",children:[a.total," $",e.cartItems.map((function(e){return console.log(e)})),e.cartItems.reduce((function(e,t){return e+t.price}),0)]}),Object(o.jsx)("button",{onClick:function(){return s(!0)},children:a.selectProducts.toUpperCase()})]}),Object(o.jsx)(M,{showForm:n,submitOrder:function(t){t.preventDefault();var c={name:d.name,email:d.email};e.createOrder(c)},setShowForm:s,handleChange:function(e){j((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(P.a)({},e.target.name,e.target.value))}))}})]})})),J=(c(57),c(19)),U=c.n(J);var $=Object(j.b)((function(e){return{sort:e.products.sort,size:e.products.size,products:e.products.products,filterProducts:e.products.filterProducts}}),{filterBySize:function(e,t){return function(c){var r=Object(k.a)(e).filter((function(e){return-1!=e.sizes.indexOf(t)}));c({type:h,data:{size:t,products:"all"==t?e:r}})}},filterBySort:function(e,t){return function(c){var r=t,n=Object(k.a)(e).sort((function(e,t){return"lowest"==r?e.price-t.price:"highest"==r?t.price-e.price:e.id<t.id?1:-1}));c({type:h,data:{sort:t,products:n}})}}})((function(e){var t=[];return console.log(e.products),Object(o.jsxs)(o.Fragment,{children:[e.products&&function(e){var c=[];e.map((function(e){c.push(e.sizes)}));var r=c.flat();t.push.apply(t,Object(k.a)(new Set(r)))}(e.products),Object(o.jsx)(J.Flip,{left:!0,children:e.filterProducts&&Object(o.jsxs)("div",{className:"filter-wrapper",children:[Object(o.jsx)("h2",{className:"filter__title",children:"Filter"}),Object(o.jsxs)("div",{className:"num-of-products",children:["Number of products: ",e.filterProducts.length]}),Object(o.jsxs)("div",{className:"filter__size",children:[Object(o.jsx)("p",{children:"Filter"}),Object(o.jsxs)("select",{className:"filter__select",onChange:function(t){return e.filterBySize(e.products,t.target.value)},value:e.size,children:[Object(o.jsx)("option",{value:"all",children:"All"}),t.map((function(e,t){return Object(o.jsx)("option",{value:e,children:e},t)}))]})]}),Object(o.jsxs)("div",{className:"filter__size",children:[Object(o.jsx)("p",{children:"Order"}),Object(o.jsxs)("select",{className:"filter__select",value:e.sort,onChange:function(t){return e.filterBySort(e.filterProducts,t.target.value)},children:[Object(o.jsx)("option",{value:"latest",children:"Latest"}),Object(o.jsx)("option",{value:"lowest",children:"Lowest"}),Object(o.jsx)("option",{value:"highest",children:"Highest"})]})]})]})})]})}));c(64);var Q=function(e){var t=e.product,c=e.closeModal;return Object(o.jsxs)(q.a,{isOpen:!!t,onRequestClose:c,children:[Object(o.jsx)("span",{className:"close-icon",onClick:c,children:"\xd7"}),Object(o.jsxs)("div",{className:"product-details",children:[Object(o.jsx)("img",{src:t.imageUrl,alt:t.title}),Object(o.jsx)("p",{children:t.title}),Object(o.jsx)("p",{children:t.desc}),Object(o.jsxs)("p",{children:["$",t.price]})]})]})};var V=Object(j.b)((function(e){return{products:e.products.filterProducts}}),{fetchProducts:function(){return function(e){fetch("/api/products").then((function(e){return e.json()})).then((function(t){e({type:O,data:t})}))}},addToCart:function(e){return function(t,c){var r=c().cart.cartItems,n=Object(k.a)(r),s=!1;n.forEach((function(t){t._id==e._id&&(t.qty++,s=!0)})),s||n.push(Object(b.a)(Object(b.a)({},e),{},{qty:1})),t({type:m,data:{cartItems:n}}),localStorage.setItem("cartItems",JSON.stringify(n))}}})((function(e){var t=Object(r.useState)(""),c=Object(R.a)(t,2),n=c[0],s=c[1];return Object(r.useEffect)((function(){e.fetchProducts()}),[]),Object(o.jsx)(U.a,{left:!0,cascade:!0,children:Object(o.jsxs)("div",{className:"products-wrapper",children:[e.products&&e.products.length?e.products.map((function(t){return Object(o.jsxs)("div",{className:"products__item",children:[Object(o.jsx)("a",{href:"#",onClick:function(){return function(e){s(e)}(t)},children:Object(o.jsx)("img",{src:t.imageUrl,alt:t.title})}),Object(o.jsxs)("div",{className:"products__info",children:[Object(o.jsx)("p",{children:t.title}),Object(o.jsxs)("span",{children:["$",t.price]})]}),Object(o.jsx)("button",{onClick:function(){return e.addToCart(t)},children:"Add To Cart"})]},t.id)})):"loading ...",Object(o.jsx)(Q,{product:n,closeModal:function(){s(!1)}})]})})}));var X=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"wrapper",children:[Object(o.jsx)(V,{}),Object(o.jsx)($,{})]}),Object(o.jsx)(H,{})]})};c(65);var Z=Object(j.b)((function(e){return{orders:e.order.orders,cartItems:e.cart.cartItems}}),{fetchOrders:function(){return function(e){fetch("/api/orders").then((function(e){return e.json()})).then((function(t){return e({type:y,data:{orders:t}})}))}}})((function(e){Object(r.useEffect)((function(){e.fetchOrders()}),[]);var t=e.orders;return Object(o.jsx)("div",{className:"orders",children:Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"id"}),Object(o.jsx)("th",{children:"name"}),Object(o.jsx)("th",{children:"email"}),Object(o.jsx)("th",{children:"items"})]})}),Object(o.jsx)("tbody",{children:t&&t.map((function(t){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:t._id}),Object(o.jsx)("td",{children:t.name}),Object(o.jsx)("td",{children:t.email}),Object(o.jsx)("td",{children:e.cartItems.map((function(e){return Object(o.jsxs)("p",{children:[e.title," , qty: ",e.qty]})}))})]},t._id)}))})]})})}));var G=function(){return Object(o.jsx)(S.a,{children:Object(o.jsx)(j.a,{store:I,children:Object(o.jsxs)("div",{className:"layout",children:[Object(o.jsx)(d,{}),Object(o.jsxs)("main",{children:[Object(o.jsx)(T,{}),Object(o.jsxs)(E.c,{children:[Object(o.jsx)(E.a,{path:"/",element:Object(o.jsx)(X,{}),exact:!0}),Object(o.jsx)(E.a,{path:"/orders",element:Object(o.jsx)(Z,{}),exact:!0})]})]}),Object(o.jsx)(l,{})]})})})},K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,67)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),r(e),n(e),s(e),i(e)}))};i.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(G,{})}),document.getElementById("root")),K()}},[[66,1,2]]]);
//# sourceMappingURL=main.b0eb1322.chunk.js.map